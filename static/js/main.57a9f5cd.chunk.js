(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{25:function(e,t,c){},49:function(e,t,c){"use strict";c.r(t);var r=c(1),a=c.n(r),n=c(6),s=c.n(n),i=(c(25),c(2)),l=c(5),d=c(20),o=c(3),u={cart:[],totalPrice:0},j="ADD_TO_CART",b="REMOVE_FROM_CART";var m=function(e){return{type:j,product:e}},O=c(7),h=c.n(O),p={products:[],currentProduct:null,category:null,error:null,loading:!1},x="GET_PRODUCTS",f="SET_CURRENT_PRODUCT",v="GET_PRODUCTS_ERROR",g="GET_PRODUCTS_LOADING";var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){t({type:g,loading:!0});var c=null!==e?"?category.id=".concat(e):"";h()("".concat("https://defapi.herokuapp.com","/products/").concat(c)).then((function(c){t({type:x,products:c.data,category:e})})).catch((function(e){t({type:v,error:e})})).then((function(){t({type:g,loading:!1})}))}},y=Object(l.b)({cartReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0,c=t.type,r=t.product;switch(c){case j:return Object(o.a)(Object(o.a)({},e),{},{cart:e.cart.concat(r),totalPrice:e.totalPrice+r.price});case b:var a=e.cart.findIndex((function(e){return e.id===r.id}));return Object(o.a)(Object(o.a)({},e),{},{cart:e.cart.filter((function(e,t){return t!==a})),totalPrice:e.totalPrice-r.price});default:return e}},productReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(o.a)(Object(o.a)({},e),{},{products:t.products,category:t.category});case f:return Object(o.a)(Object(o.a)({},e),{},{currentProduct:t.currentProduct});case v:return Object(o.a)(Object(o.a)({},e),{},{error:t.error});case g:return Object(o.a)(Object(o.a)({},e),{},{loading:t.loading});default:return e}}}),R=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c;var E=c(0),_=function(){return Object(E.jsx)("div",{className:"header",children:Object(E.jsx)("div",{className:"container"})})},C=c.p+"static/media/carrito-de-compras.0be60b4e.svg",P=function(){var e=Object(i.c)((function(e){return e.cartReducer})),t=e.cart,c=e.totalPrice,r=Object(i.b)(),a=t.reduce((function(e,t){var c=e.find((function(e){return e.id===t.id}));return c?c.qty=c.qty+1:(t.qty=1,e.push(t)),e}),[]),n=0!==t.length;return Object(E.jsxs)("div",{className:"cart-container",children:[Object(E.jsxs)("div",{className:"cart-counter d-flex s-between",children:[Object(E.jsx)("h2",{className:"cart-label",children:"Cart"}),Object(E.jsxs)("div",{className:"cart-icon",children:[Object(E.jsx)("img",{className:"icon",alt:"",src:C}),n&&Object(E.jsx)("span",{className:"product-cart-counter",children:t.length})]})]}),n&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("ul",{className:"cart-details",children:a.map((function(e){return Object(E.jsxs)("li",{className:"cart-details-item",children:[Object(E.jsx)("h3",{className:"cart-details-title",children:e.name}),Object(E.jsxs)("div",{className:"d-flex s-between",children:[Object(E.jsxs)("div",{className:"cartControls",children:[Object(E.jsx)("button",{className:"cart-button",onClick:function(){r(function(e){return{type:b,product:e}}(e));var t=document.getElementById("product-".concat(e.id));t.classList.contains("disable-cart")&&t.classList.remove("disable-cart")},children:"-"}),Object(E.jsx)("span",{className:"item-cart-counter",children:e.qty}),Object(E.jsx)("button",{className:"cart-button",onClick:function(){var t=document.getElementById("product-".concat(e.id));e.qty<e.stock?r(m(e)):!t.classList.contains("disable-cart")&&t.classList.add("disable-cart")},children:"+"})]}),Object(E.jsxs)("div",{className:"product-price",children:["$",e.price]})]})]},e.id)}))}),Object(E.jsxs)("div",{className:"total-price d-flex s-between",children:[Object(E.jsx)("div",{className:"total-price-label",children:"TOTAL"}),Object(E.jsxs)("div",{className:"total-price-value",children:["$",c]})]}),Object(E.jsx)("button",{className:"buy-products-button",children:"BUY PRODUCTS"})]})]})},k=c(8),L=function(e,t){var c=Object(r.useState)(t),a=Object(k.a)(c,2),n=a[0],s=a[1],i=Object(r.useState)(null),l=Object(k.a)(i,2),d=l[0],o=l[1],u=Object(r.useState)(!1),j=Object(k.a)(u,2),b=j[0],m=j[1];return Object(r.useEffect)((function(){return m(!0),void h()(e).then((function(e){return s(e.data)})).catch((function(e){return o(e)})).then((function(){return m(b)}))}),[]),{data:n,error:d,loading:b}},T=function(){var e=L("".concat("https://defapi.herokuapp.com","/categories"),[]),t=e.data,c=e.loading,r=e.error,a=Object(i.c)((function(e){return e.productReducer})).category,n=Object(i.b)();return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:"categories",children:[Object(E.jsx)("h2",{className:"title",children:"Categories"}),c&&Object(E.jsx)("div",{children:"LOADING..."}),r&&Object(E.jsx)("div",{children:"ERROR"}),t&&!c&&Object(E.jsxs)("ul",{className:"categories-list",children:[Object(E.jsx)("li",{className:null===a?"selected category":"category",children:Object(E.jsx)("button",{className:"category-link",onClick:function(){return n(N(null))},children:"All"})}),t.map((function(e){return Object(E.jsx)("li",{className:a&&a===e.id?"selected category":"category",children:Object(E.jsx)("button",{className:"category-link",onClick:function(){return n(N(e.id))},children:e.name})},e.id)}))]})]})})},S=c.p+"static/media/carrito-de-compras-2.f486bff9.svg",w=function(){var e=Object(i.c)((function(e){return e.productReducer})).currentProduct;return document.addEventListener("click",(function(e){e.target===document.querySelector(".modal.is-visible")&&document.querySelector(".modal.is-visible").classList.remove("is-visible")})),document.addEventListener("keyup",(function(e){"Escape"===e.key&&document.querySelector(".modal.is-visible")&&document.querySelector(".modal.is-visible").classList.remove("is-visible")})),Object(E.jsx)("div",{className:"modal",id:"modal1","data-animation":"slideInOutLeft",children:e&&Object(E.jsxs)("div",{className:"modal-dialog",children:[Object(E.jsxs)("header",{className:"modal-header",children:[Object(E.jsx)("h2",{children:e.name}),Object(E.jsx)("button",{className:"close-modal","aria-label":"close modal","data-close":!0,onClick:function(){return document.getElementById("modal1").classList.remove("is-visible")},children:"\u2715"})]}),Object(E.jsxs)("section",{className:"modal-content d-grid",children:[Object(E.jsx)("div",{className:"modal-content-image",children:Object(E.jsx)("img",{className:"modal-image",alt:e.name,src:"https://raw.githubusercontent.com/victoriae/restaurant-frontend/master/src/assets/images/"+e.image_file_name})}),Object(E.jsx)("div",{className:"modal-content-description",children:e.description})]}),Object(E.jsxs)("footer",{className:"modal-footer",children:["Price: $",e.price]})]})})},D=function(){var e=Object(i.c)((function(e){return e.productReducer})),t=e.products,c=e.loading,r=e.error,a=Object(i.c)((function(e){return e.cartReducer.cart})),n=Object(i.b)();return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:"products",children:[Object(E.jsx)("h2",{className:"title",children:"Products"}),c&&Object(E.jsx)("div",{children:"LOADING..."}),r&&Object(E.jsx)("div",{children:"ERROR"}),t&&!c&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("ul",{className:"products-list",children:t.map((function(e){var t=a.filter((function(t){return t.id===e.id})).length;return Object(E.jsxs)("li",{className:"product-item",children:[Object(E.jsx)("button",{type:"button",className:"open-modal product-image-container","data-open":"modal1",onClick:function(){var t;n((t=e,function(e){e({type:f,currentProduct:t})})),document.getElementById("modal1").classList.add("is-visible")},children:Object(E.jsx)("img",{className:"product-image",alt:e.name,src:"https://raw.githubusercontent.com/victoriae/restaurant-frontend/master/src/assets/images/"+e.image_file_name})}),Object(E.jsxs)("div",{className:"product-row d-flex s-between",children:[Object(E.jsxs)("div",{className:"product-info",children:[Object(E.jsx)("h3",{children:e.name}),Object(E.jsxs)("div",{className:"product-price",children:["$",e.price]})]}),Object(E.jsx)("div",{className:"add-to-cart",children:Object(E.jsxs)("button",{className:"cart-icon",onClick:function(c){t<e.stock?n(m(e)):c.target.classList.contains("icon")&&c.target.classList.add("disable-cart")},children:[Object(E.jsx)("img",{id:"product-".concat(e.id),className:"icon",alt:"",src:S}),0!==t&&Object(E.jsx)("span",{className:"product-cart-counter",children:t})]})})]})]},e.id)}))}),Object(E.jsx)(w,{})]})]})})},I=function(){return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(_,{}),Object(E.jsxs)("div",{className:"container",children:[Object(E.jsx)("aside",{className:"sidebar",children:Object(E.jsx)(T,{})}),Object(E.jsx)("main",{className:"main",children:Object(E.jsx)(D,{})}),Object(E.jsx)("aside",{className:"sidebar",children:Object(E.jsx)(P,{})})]})]})};var q=function(){var e=Object(l.d)(y,R(Object(l.a)(d.a)));return e.dispatch(N()),Object(E.jsx)(i.a,{store:e,children:Object(E.jsx)(I,{})})};s.a.render(Object(E.jsx)(a.a.StrictMode,{children:Object(E.jsx)(q,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.57a9f5cd.chunk.js.map