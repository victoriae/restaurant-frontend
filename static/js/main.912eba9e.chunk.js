(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{25:function(e,t,c){},49:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c.n(r),a=c(6),i=c.n(a),s=(c(25),c(4)),d=c(5),o=c(20),l=c(2),u={cart:[],totalPrice:0},j="ADD_TO_CART",b="REMOVE_FROM_CART";var O=function(e){return{type:j,product:e}},m=c(7),h=c.n(m),p={products:[],currentProduct:null,category:null,error:null,loading:!1},f="GET_PRODUCTS",x="SET_CURRENT_PRODUCT",v="GET_PRODUCTS_ERROR",g="GET_PRODUCTS_LOADING";var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){t({type:g,loading:!0});var c=null!==e?"?category.id=".concat(e):"";h()("".concat("https://defapi.herokuapp.com","/products/").concat(c)).then((function(c){t({type:f,products:c.data,category:e})})).catch((function(e){t({type:v,error:e})})).then((function(){t({type:g,loading:!1})}))}},y=Object(d.b)({cartReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0,c=t.type,r=t.product;switch(c){case j:return Object(l.a)(Object(l.a)({},e),{},{cart:e.cart.concat(r),totalPrice:e.totalPrice+r.price});case b:var n=e.cart.findIndex((function(e){return e.id===r.id}));return Object(l.a)(Object(l.a)({},e),{},{cart:e.cart.filter((function(e,t){return t!==n})),totalPrice:e.totalPrice-r.price});default:return e}},productReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(l.a)(Object(l.a)({},e),{},{products:t.products,category:t.category});case x:return Object(l.a)(Object(l.a)({},e),{},{currentProduct:t.currentProduct});case v:return Object(l.a)(Object(l.a)({},e),{},{error:t.error});case g:return Object(l.a)(Object(l.a)({},e),{},{loading:t.loading});default:return e}}}),R=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.c;var E=c(0),_=function(){return Object(E.jsx)("div",{className:"header",children:Object(E.jsx)("div",{className:"container"})})},k=function(){var e=Object(s.c)((function(e){return e.cartReducer})),t=e.cart,c=e.totalPrice,r=Object(s.b)(),n=t.reduce((function(e,t){var c=e.find((function(e){return e.id===t.id}));return c?c.qty=c.qty+1:(t.qty=1,e.push(t)),e}),[]);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("button",{className:"btn btn-cart",children:"Cart: ".concat(t.length)}),Object(E.jsx)("ul",{className:"cart-details",children:n.map((function(e){return Object(E.jsxs)("li",{children:[Object(E.jsx)("span",{children:e.name}),Object(E.jsxs)("div",{className:"cartControls",children:[Object(E.jsx)("button",{onClick:function(){var t=document.getElementById("product-".concat(e.id));e.qty<e.stock?r(O(e)):!t.classList.contains("disable-cart")&&t.classList.add("disable-cart")},children:"+"}),Object(E.jsx)("span",{children:e.qty}),Object(E.jsx)("button",{onClick:function(){r(function(e){return{type:b,product:e}}(e));var t=document.getElementById("product-".concat(e.id));t.classList.contains("disable-cart")&&t.classList.remove("disable-cart")},children:"-"})]}),Object(E.jsxs)("div",{className:"product-price",children:["$",e.price]})]},e.id)}))}),Object(E.jsxs)("div",{className:"total-price",children:["Total: ",c]})]})},C=c(8),P=function(e,t){var c=Object(r.useState)(t),n=Object(C.a)(c,2),a=n[0],i=n[1],s=Object(r.useState)(null),d=Object(C.a)(s,2),o=d[0],l=d[1],u=Object(r.useState)(!1),j=Object(C.a)(u,2),b=j[0],O=j[1];return Object(r.useEffect)((function(){return O(!0),void h()(e).then((function(e){return i(e.data)})).catch((function(e){return l(e)})).then((function(){return O(b)}))}),[]),{data:a,error:o,loading:b}},L=function(){var e=P("".concat("https://defapi.herokuapp.com","/categories"),[]),t=e.data,c=e.loading,r=e.error,n=Object(s.b)();return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:"categories",children:[Object(E.jsx)("h2",{className:"title",children:"Categories"}),c&&Object(E.jsx)("div",{children:"LOADING..."}),r&&Object(E.jsx)("div",{children:"ERROR"}),t&&!c&&Object(E.jsxs)("ul",{className:"categories-list",children:[Object(E.jsx)("li",{children:Object(E.jsx)("button",{className:"category-link",onClick:function(){return n(N(null))},children:"All"})}),t.map((function(e){return Object(E.jsx)("li",{children:Object(E.jsx)("button",{className:"category-link",onClick:function(){return n(N(e.id))},children:e.name})},e.id)}))]})]})})},S=c.p+"static/media/carrito-de-compras-2.53f68394.svg",T=function(){var e=Object(s.c)((function(e){return e.productReducer})).currentProduct;return document.addEventListener("click",(function(e){e.target===document.querySelector(".modal.is-visible")&&document.querySelector(".modal.is-visible").classList.remove("is-visible")})),document.addEventListener("keyup",(function(e){"Escape"===e.key&&document.querySelector(".modal.is-visible")&&document.querySelector(".modal.is-visible").classList.remove("is-visible")})),Object(E.jsx)("div",{className:"modal",id:"modal1","data-animation":"slideInOutLeft",children:e&&Object(E.jsxs)("div",{className:"modal-dialog",children:[Object(E.jsxs)("header",{className:"modal-header",children:[Object(E.jsx)("h3",{children:e.name}),Object(E.jsx)("button",{className:"close-modal","aria-label":"close modal","data-close":!0,onClick:function(){return document.getElementById("modal1").classList.remove("is-visible")},children:"\u2715"})]}),Object(E.jsxs)("section",{className:"modal-content",children:[Object(E.jsx)("div",{className:"product-image",children:Object(E.jsx)("img",{className:"product-image",alt:e.name,src:"https://victoriae.github.io/restaurant-frontend/static/media/"+e.image_file_name})}),Object(E.jsx)("div",{className:"product-description",children:e.description})]}),Object(E.jsxs)("footer",{className:"modal-footer",children:["Price: $",e.price]})]})})},D=function(){var e=Object(s.c)((function(e){return e.productReducer})),t=e.products,c=e.loading,r=e.error,n=Object(s.c)((function(e){return e.cartReducer.cart})),a=Object(s.b)();return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:"products",children:[Object(E.jsx)("h2",{className:"title",children:"Products"}),c&&Object(E.jsx)("div",{children:"LOADING..."}),r&&Object(E.jsx)("div",{children:"ERROR"}),t&&!c&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("ul",{className:"products-list",children:t.map((function(e){var t=n.filter((function(t){return t.id===e.id})).length;return Object(E.jsxs)("li",{children:[Object(E.jsx)("button",{type:"button",className:"open-modal","data-open":"modal1",onClick:function(){var t;a((t=e,function(e){e({type:x,currentProduct:t})})),document.getElementById("modal1").classList.add("is-visible")},children:Object(E.jsx)("img",{className:"product-image",alt:e.name,src:"https://victoriae.github.io/restaurant-frontend/static/media/"+e.image_file_name})}),Object(E.jsxs)("div",{className:"product-row",children:[Object(E.jsxs)("div",{className:"product-info",children:[Object(E.jsx)("h3",{children:e.name}),Object(E.jsxs)("div",{className:"product-price",children:["$",e.price]})]}),Object(E.jsx)("div",{className:"add-to-cart",children:Object(E.jsxs)("button",{className:"cart-icon",onClick:function(c){t<e.stock?a(O(e)):c.target.classList.contains("icon")&&c.target.classList.add("disable-cart")},children:[Object(E.jsx)("img",{id:"product-".concat(e.id),className:"icon",alt:"",src:S}),0!==t&&Object(E.jsx)("span",{className:"product-cart-counter",children:t})]})})]})]},e.id)}))}),Object(E.jsx)(T,{})]})]})})},I=function(){return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(_,{}),Object(E.jsxs)("div",{className:"container",children:[Object(E.jsx)("aside",{className:"sidebar",children:Object(E.jsx)(L,{})}),Object(E.jsx)("main",{className:"main",children:Object(E.jsx)(D,{})}),Object(E.jsx)("aside",{className:"sidebar",children:Object(E.jsx)(k,{})})]})]})};var q=function(){var e=Object(d.d)(y,R(Object(d.a)(o.a)));return e.dispatch(N()),Object(E.jsx)(s.a,{store:e,children:Object(E.jsx)(I,{})})};i.a.render(Object(E.jsx)(n.a.StrictMode,{children:Object(E.jsx)(q,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.912eba9e.chunk.js.map